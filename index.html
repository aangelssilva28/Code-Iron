<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Code and Iron</title>
  <style>
    :root {
      --bg: #000000;
      --card-bg: #111111;
      --inner-card-bg: #181818;
      --accent-blue: #007aff;
      --danger-red: #d73232;
      --text-main: #ffffff;
      --text-muted: #b3b3b3;
      --input-bg: #000000;
      --input-border: #333333;
      --radius-lg: 18px;
      --radius-md: 14px;
      --radius-sm: 10px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text-main);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        sans-serif;
    }

    .app {
      max-width: 480px;
      margin: 0 auto;
      padding: 20px 16px 40px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    h1 {
      font-size: 32px;
      font-weight: 800;
      margin: 0;
      letter-spacing: 0.5px;
    }

    .menu-button {
      width: 44px;
      height: 44px;
      border-radius: 10px;
      background: #151515;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid #333;
      cursor: pointer;
    }

    .menu-button-lines {
      width: 22px;
      height: 16px;
      position: relative;
    }

    .menu-button-lines span {
      position: absolute;
      left: 0;
      right: 0;
      height: 2px;
      background: #fff;
      border-radius: 999px;
    }

    .menu-button-lines span:nth-child(1) {
      top: 0;
    }

    .menu-button-lines span:nth-child(2) {
      top: 7px;
    }

    .menu-button-lines span:nth-child(3) {
      bottom: 0;
    }

    /* Dropdown menu */
    .menu-dropdown {
      position: absolute;
      top: 72px;
      right: 16px;
      width: 260px;
      background: #111111;
      border-radius: 16px;
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.7);
      overflow: hidden;
      border: 1px solid #262626;
      display: none;
      z-index: 20;
    }

    .menu-dropdown.open {
      display: block;
    }

    .menu-item {
      padding: 16px 18px;
      border-bottom: 1px solid #202020;
      font-size: 17px;
      cursor: pointer;
    }

    .menu-item:last-child {
      border-bottom: none;
    }

    .menu-item:active {
      background: #1b1b1b;
    }

    main {
      position: relative;
      margin-top: 8px;
    }

    .view {
      display: none;
    }

    .view-active {
      display: block;
    }

    .card-wrapper {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      padding: 16px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);
      margin-bottom: 18px;
    }

    /* Workout card */
    .exercise {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      padding: 18px 14px 16px;
    }

    .workout-name-input {
      width: 100%;
      padding: 10px 12px;
      border-radius: var(--radius-md);
      border: 1px solid var(--input-border);
      background: var(--input-bg);
      color: var(--text-main);
      font-size: 16px;
      margin-bottom: 12px;
    }

    .set-group {
      background: var(--inner-card-bg);
      border-radius: var(--radius-md);
      padding: 14px 12px 12px;
      margin-top: 10px;
    }

    .set-label {
      font-size: 16px;
      font-weight: 700;
      color: #ffb74d;
      margin-bottom: 8px;
    }

    .input-row {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }

    .input-box {
      flex: 1;
    }

    .input-box label {
      display: block;
      font-size: 13px;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .input-box input {
      width: 100%;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid var(--input-border);
      background: var(--input-bg);
      color: var(--text-main);
      font-size: 16px;
    }

    .primary-btn,
    .danger-btn {
      width: 100%;
      padding: 13px;
      border-radius: 999px;
      border: none;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
    }

    .primary-btn {
      background: var(--accent-blue);
      color: #fff;
      margin-top: 14px;
    }

    .danger-btn {
      background: var(--danger-red);
      color: #fff;
      margin-top: 8px;
    }

    .primary-btn:active,
    .danger-btn:active {
      transform: scale(0.98);
    }

    .full-width-btn {
      margin-top: 18px;
    }

    /* Workouts page headings */
    .section-title {
      font-size: 22px;
      font-weight: 700;
      margin: 0 0 4px;
    }

    .section-subtitle {
      font-size: 14px;
      color: var(--text-muted);
      margin: 0 0 14px;
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>Code and Iron</h1>
      <div class="menu-button" id="menu-btn">
        <div class="menu-button-lines">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </header>

    <!-- Dropdown menu -->
    <div class="menu-dropdown" id="menu-dropdown">
      <div class="menu-item" id="menu-workouts">Workouts</div>
      <div class="menu-item" id="menu-option2">Option 2</div>
      <div class="menu-item" id="menu-option3">Option 3</div>
      <div class="menu-item" id="menu-option4">Option 4</div>
    </div>

    <main>
      <!-- HOME VIEW (Current session workouts) -->
      <section id="home-view" class="view view-active">
        <div class="card-wrapper">
          <div id="workouts-container"></div>
        </div>
        <button id="add-workout-btn" class="primary-btn full-width-btn">
          Add workout
        </button>
      </section>

      <!-- WORKOUTS LIBRARY VIEW -->
      <section id="workouts-view" class="view">
        <div class="card-wrapper">
          <h2 class="section-title">Saved workouts</h2>
          <p class="section-subtitle">
            Build workout templates you can re-use later.
          </p>
          <div id="saved-workouts-container"></div>
        </div>
        <button
          id="add-saved-workout-btn"
          class="primary-btn full-width-btn"
        >
          Add workout
        </button>
      </section>
    </main>
  </div>

  <script>
    // ---------- Helpers to create workout + sets ----------

    function createSetGroup() {
      const setGroup = document.createElement("div");
      setGroup.className = "set-group";

      const label = document.createElement("div");
      label.className = "set-label";
      label.textContent = "Set";

      const inputRow = document.createElement("div");
      inputRow.className = "input-row";

      const weightBox = document.createElement("div");
      weightBox.className = "input-box";
      const weightLabel = document.createElement("label");
      weightLabel.textContent = "Weight";
      const weightInput = document.createElement("input");
      weightInput.type = "text";
      weightInput.placeholder = "lbs";
      weightBox.appendChild(weightLabel);
      weightBox.appendChild(weightInput);

      const repsBox = document.createElement("div");
      repsBox.className = "input-box";
      const repsLabel = document.createElement("label");
      repsLabel.textContent = "Reps";
      const repsInput = document.createElement("input");
      repsInput.type = "number";
      repsInput.min = "0";
      repsInput.value = "0";
      repsBox.appendChild(repsLabel);
      repsBox.appendChild(repsInput);

      inputRow.appendChild(weightBox);
      inputRow.appendChild(repsBox);

      const removeSetBtn = document.createElement("button");
      removeSetBtn.className = "danger-btn";
      removeSetBtn.textContent = "Remove set";

      setGroup.appendChild(label);
      setGroup.appendChild(inputRow);
      setGroup.appendChild(removeSetBtn);

      return { setGroup, label, removeSetBtn };
    }

    function updateSetLabels(setsContainer) {
      const groups = setsContainer.querySelectorAll(".set-group .set-label");
      groups.forEach((label, index) => {
        label.textContent = `Set ${index + 1}`;
      });
    }

    function createWorkoutCard() {
      const card = document.createElement("div");
      card.className = "exercise";

      const nameInput = document.createElement("input");
      nameInput.className = "workout-name-input";
      nameInput.type = "text";
      nameInput.placeholder = "Enter workout name";

      const removeWorkoutBtn = document.createElement("button");
      removeWorkoutBtn.className = "danger-btn";
      removeWorkoutBtn.textContent = "Remove workout";

      const setsContainer = document.createElement("div");

      const addSetBtn = document.createElement("button");
      addSetBtn.className = "primary-btn";
      addSetBtn.textContent = "Add set";

      card.appendChild(nameInput);
      card.appendChild(removeWorkoutBtn);
      card.appendChild(setsContainer);
      card.appendChild(addSetBtn);

      // Logic for sets
      function addSet() {
        const { setGroup, removeSetBtn } = createSetGroup();
        setsContainer.appendChild(setGroup);
        updateSetLabels(setsContainer);

        removeSetBtn.addEventListener("click", () => {
          setsContainer.removeChild(setGroup);
          updateSetLabels(setsContainer);
          if (setsContainer.children.length === 0) {
            addSet(); // always keep at least one set
          }
        });
      }

      addSet(); // first set

      addSetBtn.addEventListener("click", addSet);

      card._removeWorkoutBtn = removeWorkoutBtn; // expose for container wiring
      return card;
    }

    // ---------- App wiring ----------
    document.addEventListener("DOMContentLoaded", () => {
      const menuBtn = document.getElementById("menu-btn");
      const menuDropdown = document.getElementById("menu-dropdown");
      const menuWorkouts = document.getElementById("menu-workouts");
      const menuOption2 = document.getElementById("menu-option2");
      const menuOption3 = document.getElementById("menu-option3");
      const menuOption4 = document.getElementById("menu-option4");

      const homeView = document.getElementById("home-view");
      const workoutsView = document.getElementById("workouts-view");

      const workoutsContainer = document.getElementById("workouts-container");
      const savedWorkoutsContainer = document.getElementById(
        "saved-workouts-container"
      );

      const addWorkoutBtn = document.getElementById("add-workout-btn");
      const addSavedWorkoutBtn = document.getElementById(
        "add-saved-workout-btn"
      );

      function toggleMenu() {
        menuDropdown.classList.toggle("open");
      }

      function closeMenu() {
        menuDropdown.classList.remove("open");
      }

      menuBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        toggleMenu();
      });

      document.addEventListener("click", () => {
        closeMenu();
      });

      menuDropdown.addEventListener("click", (e) => {
        e.stopPropagation(); // keep clicks inside
      });

      function showView(viewName) {
        if (viewName === "home") {
          homeView.classList.add("view-active");
          workoutsView.classList.remove("view-active");
        } else if (viewName === "workouts") {
          workoutsView.classList.add("view-active");
          homeView.classList.remove("view-active");
        }
      }

      // Menu item actions
      menuWorkouts.addEventListener("click", () => {
        closeMenu();
        showView("workouts");
      });

      function comingSoon(optionName) {
        closeMenu();
        alert(`${optionName} coming soon!`);
      }

      menuOption2.addEventListener("click", () => comingSoon("Option 2"));
      menuOption3.addEventListener("click", () => comingSoon("Option 3"));
      menuOption4.addEventListener("click", () => comingSoon("Option 4"));

      // Add workout buttons (HOME + WORKOUTS PAGE)
      function wireAddWorkoutButton(button, container) {
        function addWorkoutCard() {
          const card = createWorkoutCard();
          container.appendChild(card);

          card._removeWorkoutBtn.addEventListener("click", () => {
            container.removeChild(card);
          });
        }

        // initial card
        addWorkoutCard();

        button.addEventListener("click", addWorkoutCard);
      }

      wireAddWorkoutButton(addWorkoutBtn, workoutsContainer);
      wireAddWorkoutButton(addSavedWorkoutBtn, savedWorkoutsContainer);
    });
  </script>
</body>
</html>