<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Code and Iron</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      background-color: #050505;
      color: #ffffff;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }

    .page {
      max-width: 640px;
      margin: 0 auto;
      padding: 16px;
    }

    /* ---------- TOP BAR (title + menu) ---------- */
    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 4px;
      position: relative;
    }

    h1 {
      font-size: 30px;
      font-weight: 800;
      margin: 0;
      letter-spacing: 0.5px;
    }

    .subtitle {
      font-size: 14px;
      color: #cccccc;
      margin: 4px 0 16px 0;
    }

    .menu-btn {
      border: none;
      background-color: #1c1c1c;
      color: #ffffff;
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .menu-btn span.icon {
      font-size: 16px;
      line-height: 1;
    }

    .menu-container {
      position: relative;
    }

    .menu-panel {
      position: absolute;
      top: 36px;
      right: 0;
      background-color: #141414;
      border-radius: 10px;
      border: 1px solid #2b2b2b;
      min-width: 150px;
      padding: 4px 0;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.6);
      display: none;
      z-index: 10;
    }

    .menu-panel.show {
      display: block;
    }

    .menu-item {
      width: 100%;
      text-align: left;
      padding: 8px 12px;
      background: none;
      border: none;
      color: #f1f1f1;
      font-size: 14px;
      cursor: pointer;
    }

    .menu-item:hover {
      background-color: #1f1f1f;
    }

    /* ---------- WORKOUT CARDS ---------- */

    #workouts {
      margin-top: 12px;
    }

    .exercise {
      background-color: #101010;
      border-radius: 16px;
      padding: 14px;
      margin-bottom: 14px;
      box-shadow: 0 0 4px rgba(0, 0, 0, 0.6);
    }

    .workout-name-input {
      width: 100%;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid #444;
      background-color: #000;
      color: #fff;
      font-size: 14px;
      margin-bottom: 8px;
    }

    .remove-workout-btn {
      width: 100%;
      padding: 8px;
      border-radius: 999px;
      border: none;
      background-color: #d72b2b;
      color: #fff;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 10px;
      cursor: pointer;
    }

    .remove-workout-btn:active {
      opacity: 0.85;
    }

    .sets {
      background-color: #151515;
      border-radius: 14px;
      padding: 10px;
      margin-bottom: 10px;
    }

    .set-label {
      font-size: 14px;
      font-weight: 700;
      color: #ffb74d;
      margin-bottom: 6px;
    }

    .input-row {
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
    }

    .input-box {
      flex: 1;
    }

    .input-box label {
      display: block;
      font-size: 13px;
      color: #bbbbbb;
      margin-bottom: 2px;
    }

    .input-box input {
      width: 100%;
      padding: 6px 8px;
      border-radius: 10px;
      border: 1px solid #333;
      background-color: #000000;
      color: #ffffff;
      font-size: 14px;
    }

    .remove-set-btn {
      width: 100%;
      padding: 8px;
      border-radius: 999px;
      border: none;
      background-color: #9b2222;
      color: #fff;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
    }

    .remove-set-btn:active {
      opacity: 0.9;
    }

    .add-set-btn,
    .add-workout-btn {
      width: 100%;
      padding: 10px;
      border-radius: 999px;
      border: none;
      background-color: #007aff;
      color: #ffffff;
      font-size: 16px;
      font-weight: 600;
      margin-top: 4px;
      cursor: pointer;
    }

    .add-workout-btn {
      margin-top: 10px;
      margin-bottom: 12px;
    }

    .add-set-btn:active,
    .add-workout-btn:active {
      opacity: 0.9;
    }
  </style>
</head>
<body>
  <div class="page">
    <header class="top-bar">
      <div>
        <h1>Code and Iron</h1>
        <div class="subtitle">
          Track each set with weight and reps. Add or remove workouts as needed.
        </div>
      </div>

      <div class="menu-container">
        <button id="menu-button" class="menu-btn" type="button" onclick="toggleMenu(event)">
          <span>Menu</span>
          <span class="icon">â‹®</span>
        </button>
        <div id="menu-panel" class="menu-panel">
          <button class="menu-item" type="button">Option 1</button>
          <button class="menu-item" type="button">Option 2</button>
          <button class="menu-item" type="button">Option 3</button>
          <button class="menu-item" type="button">Option 4</button>
        </div>
      </div>
    </header>

    <main>
      <div id="workouts"></div>

      <button class="add-workout-btn" type="button" onclick="addWorkout()">
        Add workout
      </button>
    </main>
  </div>

  <script>
    let workoutCounter = 0;

    function addWorkout() {
      workoutCounter++;
      const workoutsContainer = document.getElementById('workouts');

      const card = document.createElement('div');
      card.className = 'exercise';

      card.innerHTML = `
        <input
          class="workout-name-input"
          type="text"
          placeholder="Enter workout name"
        />

        <button class="remove-workout-btn" type="button" onclick="removeWorkout(this)">
          Remove workout
        </button>

        <div class="sets"></div>

        <button class="add-set-btn" type="button" onclick="addSet(this)">
          Add set
        </button>
      `;

      workoutsContainer.appendChild(card);

      // Start each workout with one empty set
      const addSetBtn = card.querySelector('.add-set-btn');
      addSet(addSetBtn);
    }

    function removeWorkout(button) {
      const card = button.closest('.exercise');
      if (card) {
        card.remove();
      }
    }

    function addSet(button) {
      const workoutCard = button.closest('.exercise');
      const setsContainer = workoutCard.querySelector('.sets');

      const setIndex = setsContainer.children.length + 1;

      const setBox = document.createElement('div');
      setBox.className = 'set-box';
      setBox.innerHTML = `
        <div class="set-label">Set ${setIndex}</div>
        <div class="input-row">
          <div class="input-box">
            <label>Weight</label>
            <input type="text" placeholder="lbs" />
          </div>
          <div class="input-box">
            <label>Reps</label>
            <input type="number" min="0" value="0" />
          </div>
        </div>
        <button class="remove-set-btn" type="button" onclick="removeSet(this)">
          Remove set
        </button>
      `;

      setsContainer.appendChild(setBox);
    }

    function removeSet(button) {
      const setBox = button.closest('.set-box');
      if (!setBox) return;

      const setsContainer = setBox.parentElement;
      setBox.remove();

      // Renumber remaining sets to keep labels tidy
      Array.from(setsContainer.children).forEach((child, index) => {
        const label = child.querySelector('.set-label');
        if (label) {
          label.textContent = `Set ${index + 1}`;
        }
      });
    }

    // --------- MENU LOGIC ---------
    function toggleMenu(event) {
      event.stopPropagation();
      const panel = document.getElementById('menu-panel');
      panel.classList.toggle('show');
    }

    document.addEventListener('click', function (e) {
      const panel = document.getElementById('menu-panel');
      const button = document.getElementById('menu-button');
      if (!panel) return;
      if (!panel.contains(e.target) && !button.contains(e.target)) {
        panel.classList.remove('show');
      }
    });

    // Initialize with one blank workout
    document.addEventListener('DOMContentLoaded', () => {
      addWorkout();
    });
  </script>
</body>
</html>